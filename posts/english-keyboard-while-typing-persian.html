<!DOCTYPE html><html lang="fa">
<head>
    <meta charset="utf-8">
    <title>حل مشکلی اساسی با پایتون: انگلیسی بودن کیبورد حین تایپ فارسی</title>
    <!-- Le styles -->
    <link rel="stylesheet" type="text/css" media="screen,projection" href="../assets/css/style.css" title="blog.txt">
    <link rel="stylesheet" type="text/css" media="screen,projection" href="../assets/css/2c-r.css" title="blog.txt">
    <link rel="stylesheet" type="text/css" media="print" href="../assets/css/print.css" title="blog.txt">
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
            <link rel="alternate" type="application/rss+xml" title="RSS (fa)" href="../rss.xml">
    
    
</head>
<body dir="rtl">
    <script type="text/javascript">
        var addthis_config = { 'ui_language': 'fa' };
    </script>

<div id="wrapper">
    <div id="container">
        <div id="content">
            <div id="header">
                <h1 id="blog-title">
                    <a href="http://straygeek.github.io" title="نوشته‌های یک گیک">نوشته‌های یک گیک</a>
                </h1>
		<br><hr>
                
                
            </div>
        <div class="hfeed">
            <!--Body content-->
            
    <div id="post-english-keyboard-while-typing-persian" class="post">
        <h2 class="entry-title"><a href="#">حل مشکلی اساسی با پایتون: انگلیسی بودن کیبورد حین تایپ فارسی</a></h2>
        <div class="entry-content thepost">
            <!-- link: -->
<!-- description: -->
<!-- tags: گنو/لینوکس,لینوکس,کیبورد,چرا عاشق لینوکس هستم -->
<!-- date: 2013/06/15 22:38:22 -->
<!-- title: حل مشکلی اساسی با پایتون: انگلیسی بودن کیبورد حین تایپ فارسی -->
<!-- slug: english-keyboard-while-typing-persian -->
<p>خیلی اتفاق افتاده که موقع چت با کسی، اون بخواد فارسی تایپ کنه، ولی کیبوردش انگلیسی باشه و نفهمه و مسیج انگلیسی بیاد. مثلا sghl. خوشبختانه برای خود من همچین مشکلی پیش نمیاد زیاد، چون همیشه چشمام روی اسکرین هست. ولی وقتی کس دیگه‌ای مینویسه، به خصوص موقع چت، زیاده اتفاق میفته. خوب، قرار نیست که هر دفعه صبر کنم اون دوباره بنویسه یا با تبدیل حروف تو ذهنم اون رو رمز گشایی بکنم! پس... ایمکس، بیا بالا ;)</p>
<p>یه اسکریپت کوچیک پایتون مینویسم که از یه فایل اون حروف عجق وجق انگلیسی رو بگیره:</p>
<pre class="code python literal-block">
<span class="c">#! /usr/bin/python2</span>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">per</span> <span class="o">=</span> <span class="p">[</span><span class="s">"ض"</span><span class="p">,</span> <span class="s">"ص"</span><span class="p">,</span> <span class="s">"ث"</span><span class="p">,</span>  <span class="s">"ق"</span><span class="p">,</span>  <span class="s">"ف"</span><span class="p">,</span>  <span class="s">"غ"</span><span class="p">,</span>  <span class="s">"ع"</span><span class="p">,</span>  <span class="s">"ه"</span><span class="p">,</span>  <span class="s">"خ"</span><span class="p">,</span>  <span class="s">"ح"</span><span class="p">,</span>  <span class="s">"ج"</span><span class="p">,</span>  <span class="s">"چ"</span><span class="p">,</span>  <span class="s">"ش"</span><span class="p">,</span>  <span class="s">"س"</span><span class="p">,</span>  <span class="s">"ی"</span><span class="p">,</span>  <span class="s">"ب"</span><span class="p">,</span>
        <span class="s">"ل"</span><span class="p">,</span>  <span class="s">"ا"</span><span class="p">,</span>  <span class="s">"ت"</span><span class="p">,</span>  <span class="s">"ن"</span><span class="p">,</span>  <span class="s">"م"</span><span class="p">,</span>  <span class="s">"ک"</span><span class="p">,</span>  <span class="s">"گ"</span><span class="p">,</span>  <span class="s">"ظ"</span><span class="p">,</span>  <span class="s">"ط"</span><span class="p">,</span>  <span class="s">"ز"</span><span class="p">,</span>  <span class="s">"ر"</span><span class="p">,</span>  <span class="s">"ذ"</span><span class="p">,</span>  <span class="s">"د"</span><span class="p">,</span>  <span class="s">"پ"</span><span class="p">,</span>  <span class="s">"و"</span><span class="p">]</span>
    <span class="n">eng</span> <span class="o">=</span> <span class="p">[</span><span class="s">"q"</span><span class="p">,</span>  <span class="s">"w"</span><span class="p">,</span>  <span class="s">"e"</span><span class="p">,</span>  <span class="s">"r"</span><span class="p">,</span>  <span class="s">"t"</span><span class="p">,</span>  <span class="s">"y"</span><span class="p">,</span>  <span class="s">"u"</span><span class="p">,</span>  <span class="s">"i"</span><span class="p">,</span>  <span class="s">"o"</span><span class="p">,</span>  <span class="s">"p"</span><span class="p">,</span>  <span class="s">"["</span><span class="p">,</span>  <span class="s">"]"</span><span class="p">,</span>  <span class="s">"a"</span><span class="p">,</span>  <span class="s">"s"</span><span class="p">,</span>  <span class="s">"d"</span><span class="p">,</span>
        <span class="s">"f"</span><span class="p">,</span>  <span class="s">"g"</span><span class="p">,</span>  <span class="s">"h"</span><span class="p">,</span>  <span class="s">"j"</span><span class="p">,</span>  <span class="s">"k"</span><span class="p">,</span>  <span class="s">"l"</span><span class="p">,</span>  <span class="s">";"</span><span class="p">,</span>  <span class="s">"'"</span><span class="p">,</span>  <span class="s">"z"</span><span class="p">,</span>  <span class="s">"x"</span><span class="p">,</span>  <span class="s">"c"</span><span class="p">,</span>  <span class="s">"v"</span><span class="p">,</span>  <span class="s">"b"</span><span class="p">,</span>  <span class="s">"n"</span><span class="p">,</span>  <span class="s">"m"</span><span class="p">,</span>  <span class="s">","</span><span class="p">]</span>
    <span class="n">s</span> <span class="o">=</span> <span class="s">""</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span> <span class="o">+</span> <span class="n">i</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">per</span><span class="p">)):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">eng</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">per</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre>
<p>چیزی برای توضیح دادن نداره. اول دو تا آرایه از حروف روی کیبورد به دو زبان فارسی و انگلیسی میگیره (که احتمالا راه بهتری هم وجود داره)، بعد فایل رو میخونه، حروف رو جایگزین میکنه و بعد پرینت. ورژن دو بودن پایتون هم به این خاطره که این ورژن پشتیبانی بهتری از UTF-8 و کاراکترهای فارسی داره.</p>
<p>این اسکریپت کارش رو میکنه، ولی باید هر دفعه بذارمش به یه فایل و بعد بزنم پنجره ترمینال بیاد و کد بزنم و ... . درسته، میشه به جای فایل از STDIN استفاده کنم، ولی فکر بهتری دارم. اسکریپت رو کمی تغییر میدم:</p>
<pre class="code python literal-block">
<span class="c">#! /usr/bin/python2</span>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">commands</span> <span class="kn">as</span> <span class="nn">cm</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">per</span> <span class="o">=</span> <span class="p">[</span><span class="s">"ض"</span><span class="p">,</span> <span class="s">"ص"</span><span class="p">,</span> <span class="s">"ث"</span><span class="p">,</span>  <span class="s">"ق"</span><span class="p">,</span>  <span class="s">"ف"</span><span class="p">,</span>  <span class="s">"غ"</span><span class="p">,</span>  <span class="s">"ع"</span><span class="p">,</span>  <span class="s">"ه"</span><span class="p">,</span>  <span class="s">"خ"</span><span class="p">,</span>  <span class="s">"ح"</span><span class="p">,</span>  <span class="s">"ج"</span><span class="p">,</span>  <span class="s">"چ"</span><span class="p">,</span>  <span class="s">"ش"</span><span class="p">,</span>  <span class="s">"س"</span><span class="p">,</span>  <span class="s">"ی"</span><span class="p">,</span>
        <span class="s">"ب"</span><span class="p">,</span>  <span class="s">"ل"</span><span class="p">,</span>  <span class="s">"ا"</span><span class="p">,</span>  <span class="s">"ت"</span><span class="p">,</span>  <span class="s">"ن"</span><span class="p">,</span>  <span class="s">"م"</span><span class="p">,</span>  <span class="s">"ک"</span><span class="p">,</span>  <span class="s">"گ"</span><span class="p">,</span>  <span class="s">"ظ"</span><span class="p">,</span>  <span class="s">"ط"</span><span class="p">,</span>  <span class="s">"ز"</span><span class="p">,</span>  <span class="s">"ر"</span><span class="p">,</span>  <span class="s">"ذ"</span><span class="p">,</span>  <span class="s">"د"</span><span class="p">,</span>  <span class="s">"پ"</span><span class="p">,</span>  <span class="s">"و"</span><span class="p">]</span>
    <span class="n">eng</span> <span class="o">=</span> <span class="p">[</span><span class="s">"q"</span><span class="p">,</span>  <span class="s">"w"</span><span class="p">,</span>  <span class="s">"e"</span><span class="p">,</span>  <span class="s">"r"</span><span class="p">,</span>  <span class="s">"t"</span><span class="p">,</span>  <span class="s">"y"</span><span class="p">,</span>  <span class="s">"u"</span><span class="p">,</span>  <span class="s">"i"</span><span class="p">,</span>  <span class="s">"o"</span><span class="p">,</span>  <span class="s">"p"</span><span class="p">,</span>  <span class="s">"["</span><span class="p">,</span>  <span class="s">"]"</span><span class="p">,</span>  <span class="s">"a"</span><span class="p">,</span>  <span class="s">"s"</span><span class="p">,</span>  <span class="s">"d"</span><span class="p">,</span>
        <span class="s">"f"</span><span class="p">,</span>  <span class="s">"g"</span><span class="p">,</span>  <span class="s">"h"</span><span class="p">,</span>  <span class="s">"j"</span><span class="p">,</span>  <span class="s">"k"</span><span class="p">,</span>  <span class="s">"l"</span><span class="p">,</span>  <span class="s">";"</span><span class="p">,</span>  <span class="s">"'"</span><span class="p">,</span>  <span class="s">"z"</span><span class="p">,</span>  <span class="s">"x"</span><span class="p">,</span>  <span class="s">"c"</span><span class="p">,</span>  <span class="s">"v"</span><span class="p">,</span>  <span class="s">"b"</span><span class="p">,</span>  <span class="s">"n"</span><span class="p">,</span>  <span class="s">"m"</span><span class="p">,</span>  <span class="s">","</span><span class="p">]</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">getoutput</span><span class="p">(</span><span class="s">"xclip -selection clipboard -o"</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">per</span><span class="p">)):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">eng</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">per</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">"echo -n </span><span class="se">\"</span><span class="s">"</span> <span class="o">+</span> <span class="n">s</span> <span class="o">+</span> <span class="s">"</span><span class="se">\"</span><span class="s"> | xclip -selection clipboard"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre>
<p>دو تا جا عوض شده: اول این که به جای فایل، ورودی رو از کلیپ‌بورد میگیره. و دومی هم این که خروجی رو به کلیپ‌بورد میده!</p>
<p>الان بهتر شد، و کافیه هر دفعه متن رو کپی و این اسکریپت رو از ترمینال اجرا کنم. ولی یه شرتکات هم میذارم که دیگه سنگ تموم بذارم ‎:D مثلا Ctrl+Alt+C گزینه خوبیه</p>
<p>البته این آرایه فقط حروف اصلی روی کیبورد رو داره، و مثلا «آ» یا «،» رو نداره و اگه طرف ویندوزی باشه، «و» و «پ» میرن یه جای دیگه. ولی خوب، اونجاهاش رو خودم میفهمم دیگه :)</p>
        </div>
        <div class="archive-meta">
            ارسال شده: 2013-06-15 22:38:22<span class="meta-sep"><!--|</span>
            <span class="meta-sep">|</span>
            <a href="english-keyboard-while-typing-persian.txt">reSt</a>
            <span class="meta-sep">|</span>-->
                    <a href="../categories/gnwlynwkhs.html"><span class="badge badge-info">گنو/لینوکس</span></a>
                    <a href="../categories/lynwkhs.html"><span class="badge badge-info">لینوکس</span></a>
                    <a href="../categories/khybwrd.html"><span class="badge badge-info">کیبورد</span></a>
                    <a href="../categories/chr-shq-lynwkhs-hstm.html"><span class="badge badge-info">چرا عاشق لینوکس هستم</span></a>
            <span class="entry-tags">
            </span>
        </span></div>
    </div>
    <!-- Disqus comments !-->
	<br>
        <script type="text/javascript">
            var disqus_url = 'http://straygeek.github.io/posts/english-keyboard-while-typing-persian.html';
            var disqus_developer = 1;
        </script>
        <div id="disqus_thread"></div>
        <script type="text/javascript" src="http://disqus.com/forums/straygeek/embed.js"></script>
        <noscript><a href="http://disqus.com/forums/straygeek/?url=ref">View the discussion thread.</a></noscript><a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
        <!-- End of Disqus comments !-->

            <!--End of body content-->
        </div><!-- .hfeed -->
    </div><!-- #content -->
</div><!-- #container -->

<div id="primary" class="sidebar" dir="ltr">
    <ul>
	<li><h3><a href="../stories/about.html">ABOUT</a></h3></li>
            <li><h3><a href="../archive.html">Archives</a></h3></li>
            <li><h3><a href="../categories/index.html">Tags</a></h3></li>
            <li><h3><a href="../rss.xml">RSS</a></h3></li>

    	<!-- search engine
	<li style="text-align:center">
	<br/>
	<form id="cse-search-box" action="http://google.com/cse">
	<input type="hidden" name="cx" value="016434289486447386752:vexfuidzg2y" />
	<input type="hidden" name="ie" value="UTF-8" />
	<input type="text" name="q" size="31" />
	<br/><input type="submit" name="sa" value="Search" />
	</form>
	<br/>
	<img src="http://www.google.com/cse/images/google_custom_search_smwide.gif">
	</li>
	-->

        <li>
        <!-- social buttons -->
        <li>
            <div class="addthis_toolbox addthis_default_style" style="margin-bottom: 12px;">
            <a class="addthis_button_preferred_1"></a>
            <a class="addthis_button_preferred_2"></a>
            <a class="addthis_button_preferred_3"></a>
            <a class="addthis_button_preferred_4"></a>
            <a class="addthis_button_compact"></a>
            <a class="addthis_counter addthis_bubble_style"></a>
            </div>
            <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-4f7088a56bb93798"></script>
        <!-- End of social buttons -->
        </li><li>
    </li></ul>
</div><!-- #primary .sidebar -->

<div id="footer" dir="ltr">
    <span id="theme-link"><a href="http://www.plaintxt.org/themes/blogtxt/" title="&lt;?php _e('blog.txt theme for WordPress', 'blogtxt' ) ?&gt;" rel="follow designer">blog.txt</a> <?php _e('theme by', 'blogtxt') ?> <span class="vcard"><a class="url fn n" href="http://scottwallick.com/" title="scottwallick.com" rel="follow designer"><span class="given-name">Scott</span><span class="additional-name"> Allan</span><span class="family-name"> Wallick</span></a></span></span>
    <small>Contents © 2013         <a href="mailto:vapaapoika@gmail.com">علیرضا</a> - Powered by         <a href="http://nikola.ralsina.com.ar">Nikola</a></small><p>
</p></div><!-- #footer -->

</div><!-- #wrapper -->
    
<!-- end transmission -->
</body></html>